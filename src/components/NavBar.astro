---
const currentPath = Astro.url.pathname;

function navClass(path: string) {
  const isActive = currentPath === path;

  return `font-bold relative
          ${isActive ? "text-[#C69749]" : "text-[#1C1C1C]"}
          after:content-[''] after:absolute after:left-0 after:-bottom-1
          after:h-[4px] after:bg-[#C69749]
          after:transition-all after:duration-600
          ${isActive ? "after:w-full" : "after:w-0 hover:after:w-full"}`;
}
---

<div class="w-full">
  <!-- Navbar wrapper -->
  <div class="flex justify-between items-center pt-8 p-4">
    <!-- Logo -->
    <img src="/my_logo.png" alt="Logo" class="w-30 h-24 ml-4" />

    <!-- Mobile Nav -->
    <button
      id="menu-btn"
      class="md:hidden focus:outline-none z-50 relative w-8 h-8 flex items-center justify-center"
      aria-label="Toggle menu"
    >
      <!-- Hamburger icon -->
      <svg
        id="hamburger-icon"
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
      <!-- Close icon -->
      <svg
        id="close-icon"
        class="w-6 h-6 text-[#F5F5F5] hidden absolute"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>

    <!-- Desktop Nav -->
    <div class="hidden md:flex md:flex-row md:justify-end gap-8 pr-14">
      <a href="/" class={navClass("/")}>About Me</a>
      <a href="/projects" class={navClass("/projects")}>Projects</a>
      <a href="/milestones" class={navClass("/milestones")}>Milestones</a>
      <a href="#contact" class={navClass("/contact")}>Contact</a>
    </div>
  </div>

  <!-- Mobile Nav Drawer -->
  <div
    id="mobile-menu"
    class="fixed top-0 right-0 h-full w-2/3 text-[#F5F5F5] bg-[#1D1D1D] transform
    translate-x-full transition-transform duration-300 ease-in-out flex flex-col
    space-y-6 p-8 lg:hidden z-40"
  >
    <a href="/" class={navClass("/")}>About Me</a>
    <a href="/projects" class={navClass("/projects")}>Projects</a>
    <a href="/milestones" class={navClass("/milestones")}>Milestones</a>
    <a href="#contact" class={navClass("/contact")}>Contact</a>
  </div>
</div>

<script>
  const menuBtn = document.getElementById("menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const hamburgerIcon = document.getElementById("hamburger-icon");
  const closeIcon = document.getElementById("close-icon");

  const toggleMenu = () => {
    mobileMenu?.classList.toggle("translate-x-0");
    mobileMenu?.classList.toggle("translate-x-full");
    hamburgerIcon?.classList.toggle("hidden");
    closeIcon?.classList.toggle("hidden");
  };
  menuBtn?.addEventListener("click", toggleMenu);
</script>
